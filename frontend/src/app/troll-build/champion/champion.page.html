<ng-container *ngIf="champion">
  <section class="section">
    <div class="container">
      <!-- Champion row -->
      <div class="columns">
        <div class="column
          is-2-widescreen is-offset-4-widescreen
          is-3-desktop is-offset-2-desktop
          is-3-tablet is-offset-3-tablet
          is-9-mobile is-offset-3-mobile">
          <div id="champion-img-container">
            <div id="champion-partype-ribbon">
              <span id="champion-partype">{{champion.partype}}</span>
            </div>
            <img id="champion-img" src="/api/img/champions/{{champion.id}}" [alt]="champion.key">
            <button id="new-build-btn" class="button is-primary" [class.is-loading]="trollBuildLoading"
              (click)="getTrollBuild()">New Build</button>
          </div>
        </div>
        <div class="column has-text-centered-mobile">
          <p id="champion-name">{{champion.name}}</p>
          <p id="champion-title" class="is-capitalized">{{champion.title}}</p>
          <ul id="champion-tags">
            <li class="tag champion-tag is-dark" *ngFor="let tag of champion.tags">{{tag}}</li>
          </ul>
          <div class="select" *ngIf="gameMaps; else loadingMaps">
            <select id="map-select" [(ngModel)]="gameMap" (ngModelChange)="getTrollBuild()">
              <option class="map-option" *ngFor="let gameMap of gameMaps" [ngValue]="gameMap">
                {{gameMap.mapName}}
              </option>
            </select>
          </div>
          <ng-template #loadingMaps>
            <div class="select is-loading">
              <select id="map-select-loading">
                <option class="map-option-loading">
                  Fetching maps...
                </option>
              </select>
            </div>
          </ng-template>
        </div>
      </div>
      <ng-container *ngIf="(trollBuild$ | async) as trollBuild; else loadingTrollBuild">
        <ng-container *ngIf="trollBuild.items && trollBuild.summonerSpells && trollBuild.trinket; else noTrollBuild">
          <ltb-troll-build [trollBuild]="trollBuild" [buildSaving]="buildSaving" [build]="build"
            (saveTrollBuildEvent)="saveBuild($event)">
          </ltb-troll-build>
        </ng-container>
        <ng-template #noTrollBuild>
          <div class="columns">
            <div class="column
              is-4-widescreen is-offset-4-widescreen
              is-6-desktop is-offset-2-desktop
              is-6-tablet is-offset-3-tablet
              is-12-mobile">
              <article id="no-troll-build-alert" class="message is-danger">
                <div class="message-body">
                  <p id="no-troll-build-alert-msg">An error has occurred while generating a Troll Build. Please try again later.</p>
                </div>
              </article>
            </div>
          </div>
        </ng-template>
      </ng-container>
      <ng-template #loadingTrollBuild>
        <ltb-troll-build [trollBuild]="null" [build]="build">
        </ltb-troll-build>
      </ng-template>
    </div>
  </section>
</ng-container>
