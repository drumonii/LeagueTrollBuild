<div class="card" data-e2e="env-card">
  <div class="card-header">
    Environment
    <button [disabled]="gettingEnv" class="btn btn-link" (click)="getEnv()" data-e2e="refresh-env-btn">
      <clr-icon shape="refresh"></clr-icon>
    </button>
  </div>
  <div class="card-block">
    <ng-container *ngIf="(env$ | async) as env; else loadingEnv">
      <ng-container *ngIf="env.jdk && env.os && env.tz; else errorGettingEnv">
        <div class="card-title">
          JDK Info
        </div>
        <div class="card-text">
          <p data-e2e="jdk-info">
            {{env.jdk.vendor}} {{env.jdk.version}}
          </p>
        </div>
        <div class="card-title">
          OS Name
        </div>
        <div class="card-text">
          <p data-e2e="os-info">
            {{env.os.name}} ({{env.os.arch}})
          </p>
        </div>
        <div class="card-title">
          Timezone
        </div>
        <div class="card-text">
          <p data-e2e="tz-info">
            {{env.tz.name}}
          </p>
        </div>
      </ng-container>
      <ng-template #errorGettingEnv>
        <clr-alert [attr.data-e2e]="'error-env-alert'" [clrAlertType]="'danger'" [clrAlertClosable]="false">
          <clr-alert-item>
            <span class="alert-text">Unable to get the environment properties. Please try again.</span>
            <div class="alert-actions">
              <button class="btn btn-link" (click)="getEnv()" data-e2e="refresh-env-btn">
                <clr-icon shape="refresh"></clr-icon>
              </button>
            </div>
          </clr-alert-item>
        </clr-alert>
      </ng-template>
    </ng-container>
    <ng-template #loadingEnv>
      <div class="progress top loop">
        <progress></progress>
      </div>
      <div class="card-title">
        JDK Info
      </div>
      <div class="card-text">
        <p>
          ...
        </p>
      </div>
      <div class="card-title">
        OS Name
      </div>
      <div class="card-text">
        <p>
          ...
        </p>
      </div>
      <div class="card-title">
        Timezone
      </div>
      <div class="card-text">
        <p>
          ...
        </p>
      </div>
    </ng-template>
  </div>
</div>
